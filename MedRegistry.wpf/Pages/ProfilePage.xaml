<Page x:Class="MedRegistryApp.wpf.Pages.ProfilePage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:local="clr-namespace:MedRegistryApp.wpf.Pages"
      mc:Ignorable="d" >

    <ScrollViewer Background="#F0F2F5">
        <StackPanel Margin="30" MaxWidth="700" HorizontalAlignment="Center">

            <!-- Заголовок -->
            <TextBlock x:Name="ProfileTitle" 
                       Text="Профиль пользователя" 
                       FontSize="28" 
                       FontWeight="Bold" 
                       Foreground="#0B7FC7" 
                       Margin="0,0,0,20" 
                       HorizontalAlignment="Center"/>

            <!-- Кнопка показать/скрыть данные -->
            <Border Background="White" CornerRadius="10" Padding="15" Margin="0,0,0,15"
                    BorderBrush="#E0E0E0" BorderThickness="1" Cursor="Hand"
                    MouseLeftButtonDown="ToggleProfileData_Click" x:Name="ToggleButton">
                <Border.Effect>
                    <DropShadowEffect Color="Gray" Direction="315" ShadowDepth="2" Opacity="0.15" BlurRadius="4"/>
                </Border.Effect>
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                    <TextBlock x:Name="ToggleIcon" Text="▼" FontSize="14" Foreground="#0B7FC7" Margin="0,0,10,0" VerticalAlignment="Center"/>
                    <TextBlock x:Name="ToggleText" Text="Показать личные данные" FontSize="15" FontWeight="SemiBold" Foreground="#0B7FC7"/>
                </StackPanel>
            </Border>

            <!-- Карточка с данными пользователя (скрыта по умолчанию) -->
            <Border x:Name="ProfileDataBorder" Background="White" CornerRadius="15" Padding="30" Margin="0,0,0,20"
                    BorderBrush="#E0E0E0" BorderThickness="1" Visibility="Collapsed">
                <Border.Effect>
                    <DropShadowEffect Color="Gray" Direction="315" ShadowDepth="3" Opacity="0.2" BlurRadius="5"/>
                </Border.Effect>
                <StackPanel>
                    <TextBlock Text="Личная информация" 
                               FontSize="18" FontWeight="Bold" 
                               Foreground="#0B7FC7" 
                               Margin="0,0,0,15"/>
                    
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="200"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <TextBlock Text="Логин:" Grid.Row="0" Grid.Column="0" 
                                   FontWeight="Bold" FontSize="15" Margin="0,8" Foreground="#333"/>
                        <TextBlock x:Name="UsernameRun" Grid.Row="0" Grid.Column="1" 
                                   FontSize="15" Margin="0,8" Foreground="#222" FontWeight="SemiBold"/>

                        <TextBlock Text="Фамилия:" Grid.Row="1" Grid.Column="0" 
                                   FontWeight="Bold" FontSize="15" Margin="0,8" Foreground="#333"/>
                        <TextBlock x:Name="LastNameRun" Grid.Row="1" Grid.Column="1" 
                                   FontSize="15" Margin="0,8" Foreground="#222" FontWeight="SemiBold"/>

                        <TextBlock Text="Имя:" Grid.Row="2" Grid.Column="0" 
                                   FontWeight="Bold" FontSize="15" Margin="0,8" Foreground="#333"/>
                        <TextBlock x:Name="FirstNameRun" Grid.Row="2" Grid.Column="1" 
                                   FontSize="15" Margin="0,8" Foreground="#222" FontWeight="SemiBold"/>

                        <TextBlock Text="Отчество:" Grid.Row="3" Grid.Column="0" 
                                   FontWeight="Bold" FontSize="15" Margin="0,8" Foreground="#333"/>
                        <TextBlock x:Name="MiddleNameRun" Grid.Row="3" Grid.Column="1" 
                                   FontSize="15" Margin="0,8" Foreground="#222" FontWeight="SemiBold"/>

                        <TextBlock Text="Email:" Grid.Row="4" Grid.Column="0" 
                                   FontWeight="Bold" FontSize="15" Margin="0,8" Foreground="#333"/>
                        <TextBlock x:Name="EmailRun" Grid.Row="4" Grid.Column="1" 
                                   FontSize="15" Margin="0,8" Foreground="#222" FontWeight="SemiBold"/>

                        <TextBlock Text="Телефон:" Grid.Row="5" Grid.Column="0" 
                                   FontWeight="Bold" FontSize="15" Margin="0,8" Foreground="#333"/>
                        <TextBlock x:Name="PhoneRun" Grid.Row="5" Grid.Column="1" 
                                   FontSize="15" Margin="0,8" Foreground="#222" FontWeight="SemiBold"/>

                        <TextBlock Text="Адрес:" Grid.Row="6" Grid.Column="0" 
                                   FontWeight="Bold" FontSize="15" Margin="0,8" Foreground="#333"/>
                        <TextBlock x:Name="AddressRun" Grid.Row="6" Grid.Column="1" 
                                   FontSize="15" Margin="0,8" Foreground="#222" FontWeight="SemiBold" TextWrapping="Wrap"/>

                        <TextBlock Text="Медицинский полис:" Grid.Row="7" Grid.Column="0" 
                                   FontWeight="Bold" FontSize="15" Margin="0,8" Foreground="#333"/>
                        <TextBlock x:Name="PolicyRun" Grid.Row="7" Grid.Column="1" 
                                   FontSize="15" Margin="0,8" Foreground="#222" FontWeight="SemiBold"/>
                    </Grid>

                </StackPanel>
            </Border>

            <!-- Ближайший приём (для пациентов и врачей) -->
            <Border x:Name="NextAppointmentBorder" Background="White" CornerRadius="15" Padding="30" Margin="0,0,0,20"
                    BorderBrush="#E0E0E0" BorderThickness="1" Visibility="Collapsed">
                <Border.Effect>
                    <DropShadowEffect Color="Gray" Direction="315" ShadowDepth="3" Opacity="0.2" BlurRadius="5"/>
                </Border.Effect>
                <StackPanel>
                    <TextBlock Text="📅 Ближайший приём" 
                               FontSize="18" FontWeight="Bold" 
                               Foreground="#27AE60" 
                               Margin="0,0,0,15"/>
                    <Grid x:Name="NextAppointmentGrid">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="130"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <TextBlock Text="Дата:" Grid.Row="0" Grid.Column="0" 
                                   FontWeight="Bold" FontSize="15" Margin="0,5" Foreground="#333"/>
                        <TextBlock x:Name="NextApptDateText" Grid.Row="0" Grid.Column="1" 
                                   FontSize="15" Margin="0,5" Foreground="#222" FontWeight="SemiBold"/>

                        <TextBlock Text="Время:" Grid.Row="1" Grid.Column="0" 
                                   FontWeight="Bold" FontSize="15" Margin="0,5" Foreground="#333"/>
                        <TextBlock x:Name="NextApptTimeText" Grid.Row="1" Grid.Column="1" 
                                   FontSize="15" Margin="0,5" Foreground="#222" FontWeight="SemiBold"/>

                        <!-- Для пациента - Врач, для врача - Пациент -->
                        <TextBlock x:Name="NextApptPersonLabel" Text="Врач:" Grid.Row="2" Grid.Column="0" 
                                   FontWeight="Bold" FontSize="15" Margin="0,5" Foreground="#333"/>
                        <TextBlock x:Name="NextApptPersonText" Grid.Row="2" Grid.Column="1" 
                                   FontSize="15" Margin="0,5" Foreground="#222" FontWeight="SemiBold"/>

                        <!-- Причина визита (только для врача) -->
                        <TextBlock x:Name="NextApptPurposeLabel" Text="Причина:" Grid.Row="3" Grid.Column="0" 
                                   FontWeight="Bold" FontSize="15" Margin="0,5" Foreground="#333" Visibility="Collapsed"/>
                        <TextBlock x:Name="NextApptPurposeText" Grid.Row="3" Grid.Column="1" 
                                   FontSize="15" Margin="0,5" Foreground="#222" FontWeight="SemiBold" TextWrapping="Wrap" Visibility="Collapsed"/>

                        <TextBlock x:Name="NextApptCabinetLabel" Text="Кабинет:" Grid.Row="4" Grid.Column="0" 
                                   FontWeight="Bold" FontSize="15" Margin="0,5" Foreground="#333"/>
                        <TextBlock x:Name="NextApptCabinetText" Grid.Row="4" Grid.Column="1" 
                                   FontSize="15" Margin="0,5" Foreground="#222" FontWeight="SemiBold"/>
                    </Grid>
                    
                    <!-- Сообщение если нет приёмов -->
                    <TextBlock x:Name="NoAppointmentText" 
                               Text="У вас нет запланированных приёмов" 
                               FontSize="15" Foreground="#7F8C8D" 
                               Visibility="Collapsed"
                               HorizontalAlignment="Center"/>
                </StackPanel>
            </Border>

            <!-- Последний отчёт пациента (только для пациентов) -->
            <Border x:Name="LastRecordBorder" Background="White" CornerRadius="15" Padding="30" Margin="0,0,0,20"
                    BorderBrush="#E0E0E0" BorderThickness="1" Visibility="Collapsed">
                <Border.Effect>
                    <DropShadowEffect Color="Gray" Direction="315" ShadowDepth="3" Opacity="0.2" BlurRadius="5"/>
                </Border.Effect>
                <StackPanel>
                    <TextBlock Text="Последний медицинский отчёт" 
                               FontSize="16" FontWeight="Bold" 
                               Foreground="#0B7FC7" 
                               Margin="0,0,0,15"/>
                    <StackPanel Orientation="Vertical" x:Name="LastRecordPanel">
                        <TextBlock Text="Диагноз: —" x:Name="LastDiagnosisText" 
                                   FontSize="15" Margin="0,5" TextWrapping="Wrap" Foreground="#222" FontWeight="SemiBold"/>
                        <TextBlock Text="Лечение: —" x:Name="LastTreatmentText" 
                                   FontSize="15" Margin="0,5" TextWrapping="Wrap" Foreground="#222" FontWeight="SemiBold"/>
                    </StackPanel>
                </StackPanel>
            </Border>


            <!-- Кнопки редактирования -->
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,25,0,0">
                <Button Content="Редактировать профиль" 
                        Height="40" Width="180" 
                        Background="#0B7FC7" Foreground="White" 
                        FontWeight="SemiBold" Margin="0,0,10,0"
                        Click="EditProfile_Click"
                        Style="{StaticResource 2ButtonStyle}"/>

                <Button Content="Редактировать логин/пароль" 
                        Height="40" Width="200" 
                        Background="#0B7FC7" Foreground="White"
                        FontWeight="SemiBold"
                        Click="EditCredentials_Click"
                        Style="{StaticResource 2ButtonStyle}"/>
            </StackPanel>

        </StackPanel>
    </ScrollViewer>
</Page>
